number_of_ensembles: 50
leg: 1
parameters:
  - in_paramid: 130 #t
    steps:
      - interval: 12
        start_step: 0
        end_step: 240
    windows:
      - periods:
          - range: [12, 12]
          - range: [24, 24]
          - range: [36, 36]
        thresholds:
          - out_paramid: 131022
            comparison: "<"
            value: -8
          - out_paramid: 131023
            comparison: "<"
            value: -4
        grib_set:
          bitsPerValue: 24
      - periods:
          - range: [12, 12]
          - range: [24, 24]
          - range: [36, 36]
        thresholds:
          - out_paramid: 131024
            comparison: ">="
            value: 4
          - out_paramid: 131025
            comparison: ">="
            value: 8
        grib_set:
          bitsPerValue: 24
      - periods:
          - range: [120, 240]
          - range: [168, 240]
          - range: [120, 168]
        thresholds:
          - out_paramid: 131020
            comparison: "<"
            value: -2
        grib_set:
          bitsPerValue: 24
      - periods:
          - range: [120, 240]
          - range: [168, 240]
          - range: [120, 168]
        thresholds:
          - out_paramid: 131021
            comparison: ">="
            value: 2
        grib_set:
          bitsPerValue: 24
    std_anomaly_windows:
      - periods:
          - range: [0, 0]
          - range: [12, 12]
          - range: [24, 24]
          - range: [36, 36]
        thresholds:
          - out_paramid: 133093
            comparison: '>'
            value: 1
          - out_paramid: 133094
            comparison: '>'
            value: 1.5
          - out_paramid: 133095
            comparison: '>'
            value: 2
        grib_set:
          localDefinitionNumber: 30 # Overwrite default value
          bitsPerValue: 24 # Overwrite default value
          edition: 2
          tablesVersion: 21
          typeOfGeneratingProcess: 5
          paramId: 0 # Placeholder so that it is set before edition, correct value replaces this when run
          timeIncrement: 12
          indicatorOfUnitForTimeIncrement: 1
          typeOfStatisticalProcessing: 10
          grib2LocalSectionNumber: 30
          # scaleFactorOfUpperLimit: 'MISSING' - Set to missing in script but not in mars
          # scaledValueOfUpperLimit: 'MISSING'
      - periods:
          - range: [0, 0]
          - range: [12, 12]
          - range: [24, 24]
          - range: [36, 36]
        thresholds:
          - out_paramid: 133096
            comparison: '<'
            value: -1
          - out_paramid: 133097
            comparison: '<'
            value: -1.5
          - out_paramid: 133098
            comparison: '<'
            value: -2
        grib_set:
          localDefinitionNumber: 30
          bitsPerValue: 24
          edition: 2
          tablesVersion: 21
          typeOfGeneratingProcess: 5
          paramId: 0
          timeIncrement: 12
          indicatorOfUnitForTimeIncrement: 1
          typeOfStatisticalProcessing: 10
          grib2LocalSectionNumber: 30
          # scaleFactorOfUpperLimit: 'MISSING'
          # scaledValueOfUpperLimit: 'MISSING'
    base_request:
      class: 'od'
      expver: '0001'
      stream: 'enfo'
      levelist: 850
      levtype: 'pl'  
      type: 'pf'   
      domain: g 
    interpolation_keys:
      grid: 'O640'
    climatology:
      stream: 'efhs'

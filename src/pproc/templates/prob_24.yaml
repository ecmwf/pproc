number_of_ensembles: 50
leg: 1
parameters:
  - in_paramid: 165 # ff  
    second_parameter:
      paramid: 166
      combine_operation: 'norm'
    steps:
      - interval: 24
        start_step: 24
        end_step: 240
    windows:
      - periods:
          - range: [24, 24]
          - range: [48, 48]
          - range: [72, 72]
          - range: [96, 96]
          - range: [120, 120]
          - range: [144, 144]
          - range: [168, 168]
          - range: [192, 192]
          - range: [216, 216]
          - range: [240, 240]
        thresholds:
          - out_paramid: 131068
            comparison: ">="
            value: 10
          - out_paramid: 131069
            comparison: ">="
            value: 15
    base_request:
      class: od
      stream: enfo
      expver: '0001'
      type: pf
      levtype: sfc
      domain: g
  - in_paramid: 142 # rain
    second_parameter:
      paramid: 143
      combine_operation: 'sum'
    steps:
      - interval: 24
        start_step: 0
        end_step: 240
    windows:
      - window_operation: 'diff'
        periods:
          - range: [0, 24]
          - range: [24, 48]
          - range: [48, 72]
          - range: [72, 96]
          - range: [96, 120]
          - range: [120, 144]
          - range: [144, 168]
          - range: [168, 192]
          - range: [192, 216]
          - range: [216, 240]
        thresholds:
          - out_paramid: 131060
            comparison: ">="
            value: 0.001
            localDecimalScaleFactor: 3
          - out_paramid: 131061
            comparison: ">="
            value: 0.005
            localDecimalScaleFactor: 3
          - out_paramid: 131062
            comparison: ">="
            value: 0.01
            localDecimalScaleFactor: 3
          - out_paramid: 131063
            comparison: ">="
            value: 0.02
            localDecimalScaleFactor: 3
        grib_set:
          timeRangeIndicator: 5
          stepType: diff 
      - window_operation: 'diff'
        periods:
          - range: [0, 24]
          - range: [24, 48]
          - range: [48, 72]
          - range: [72, 96]
          - range: [96, 120]
          - range: [120, 144]
          - range: [144, 168]
          - range: [168, 192]
          - range: [192, 216]
          - range: [216, 240]
        thresholds:
          - out_paramid: 131098 
            comparison: ">="
            value: 0.025
          - out_paramid: 131099
            comparison: ">="
            value: 0.05
          - out_paramid: 131085
            comparison: ">="
            value: 0.1
        grib_set:
          timeRangeIndicator: 0 # Should be 5?
          stepType: 'accum'
          stepRange: '0-0' # Placeholder so that it is set before edition, it will be filled in with correct values when run
          edition: 2
          scaleFactorOfLowerLimit: 0 # Should be 3?
          probabilityType: 3
          typeOfGeneratingProcess: 5
          indicatorOfUnitForTimeIncrement: 1
          timeIncrement: 12
          localTablesVersion: 0
          scaleFactorOfUpperLimit: 'MISSING'
          scaledValueOfUpperLimit: 'MISSING'
      - window_operation: 'diffdailyrate'
        periods: 
          - range: [120, 240]
          - range: [120, 168]
          - range: [168, 240]
        thresholds:
          - out_paramid: 131064
            comparison: '<'
            value: 0.0001
            localDecimalScaleFactor: 4
          - out_paramid: 131065
            comparison: '<'
            value: 0.001
            localDecimalScaleFactor: 4
          - out_paramid: 131066
            comparison: '>='
            value: 0.003
            localDecimalScaleFactor: 4
          - out_paramid: 131067
            comparison: '>='
            value: 0.005
            localDecimalScaleFactor: 4
        grib_set:
          timeRangeIndicator: 5
          stepType: diff 
    base_request:
      class: od
      stream: enfo
      expver: '0001'
      type: pf
      levtype: sfc
      domain: g
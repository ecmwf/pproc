num_members: 6
out_keys:
  expver: "0001"
  type: ep
  localDefinitionNumber: 5
  bitsPerValue: 8
parameters:
  t850:
    in: 130
    in_keys:
      interpolate:
        grid: O640
        intgrid: none
        legendre-loader: shmem
        matrix-loader: file-io
    accumulations:
      step:
        type: legacywindow
        steps:
        - interval: 12
          start_step: 0
          end_step: 24
        windows:
        - periods:
          - range:
            - 0
            - 0
          - range:
            - 12
            - 12
          thresholds:
          - out_paramid: 131022
            comparison: <
            value: -8
          - out_paramid: 131025
            comparison: '>'
            value: 8
          grib_set:
            bitsPerValue: 24
        - periods:
          - range:
            - 0
            - 24
          window_operation: mean
          include_start_step: true
          thresholds:
          - out_paramid: 131020
            comparison: <
            value: -2
          - out_paramid: 131021
            comparison: '>='
            value: 2
          grib_set:
            bitsPerValue: 24
        std_anomaly_windows:
        - periods:
          - range:
            - 0
            - 0
          - range:
            - 12
            - 12
          thresholds:
          - out_paramid: 133093
            comparison: '>'
            value: 1
          - out_paramid: 133096
            comparison: <
            value: -1
            limit_type: lower
          grib_set:
            localDefinitionNumber: 30
            bitsPerValue: 24
            edition: 2
            tablesVersion: 30
            typeOfGeneratingProcess: 5
            paramId: 0
            timeIncrement: 12
            # indicatorOfUnitForTimeIncrement: 1 ** Must be omitted when run with pytest **
            typeOfStatisticalProcessing: 10
            packingType: grid_ccsds
            scaleFactorOfUpperLimit: MISSING
            scaledValueOfUpperLimit: MISSING
    clim:
      in: 130
      in_keys:
        interpolate:
          grid: O640
          intgrid: none
          legendre-loader: shmem
          matrix-loader: file-io
        step:
          0: 12
          12: 24
          24: 36
sources:
  fdb:
    ens:
      - class: od
        stream: enfo
        expver: '0001'
        levelist: 850
        levtype: pl
        type: cf
        domain: g
        date: 20240507
        time: 12
      - class: od
        stream: enfo
        expver: '0001'
        levelist: 850
        levtype: pl
        type: pf
        domain: g
        date: 20240507
        time: 12
    clim:
      - class: od
        stream: efhs
        expver: '0001'
        levelist: 850
        levtype: pl
        stream: efhs
        type: em
        date: 20240506
        domain: g
        time: 00
      - class: od
        stream: efhs
        expver: '0001'
        levelist: 850
        levtype: pl
        type: es
        date: 20240506
        domain: g
        time: 00
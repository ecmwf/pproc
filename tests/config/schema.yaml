defs:
  interp_keys: &interp_keys
    intgrid: "none"
    legendre-loader: "shmem"
    matrix-loader: "file-io"
  monthly_ostreams: &mstreams msmm/swmm

filter:stream:
  oper: 
    defs:
      GRID: O1280
      STEP_START: 0
      STEP_END: 360
      STEP_BY: 6
    request:
      stream: "{stream}"
  enfo/waef:
    members: 50
    total_fields: 51
    defs: 
      GRID: O1280
      STEP_START: 0
      STEP_END: 360
      STEP_BY: 6
      UNPERTURBED: "cf"
      WIDTH: 6
      INTERVAL: 6
    request: 
      stream: "{stream}"
      type: ["{UNPERTURBED}", "pf"]
  eefo/weef:
    members: 100
    total_fields: 101
    defs:
      GRID: O320
      STEP_START: 0
      STEP_END: 1104
      STEP_BY: 6
      UNPERTURBED: "cf"
      WIDTH: 6
      INTERVAL: 6
    request: 
      stream: "{stream}"
      type: ["{UNPERTURBED}", "pf"]
  msmm:
    members:
      start: 0
      end: 50
    defs:
      GRID: O1280
      STEP_START: 0
      STEP_END: 5160
      STEP_BY: 6
    request:
      stream: mmsf
      type: "fc"
  swmm:
    members:
      start: 0
      end: 50
    defs:
      GRID: O1280
      STEP_START: 0
      STEP_END: 5160
      STEP_BY: 6
    request:
      stream: wasf
      type: "fc"
filter:param:
  "*": {}
  "207.128":
    request:
      param: [165, 166]
      interpolate:
        <<: *interp_keys
        grid: "{GRID}"
    preprocessing:
      - operation: norm
  "249.228":
    request:
      param: [228246, 228247]
      interpolate:
        <<: *interp_keys
        grid: "{GRID}"
    preprocessing: 
      - operation: norm  
  "142.172":
    defs:
      STEP_BY: 24
    vmin: 0.
    preprocessing:
      - operation: scale
        value: 0.00001157407
    request:
      param: "142.128"
    accumulations:
      step:
        include_start_step: True
        deaccumulate: True
  "143.172":
    defs:
      STEP_BY: 24
    vmin: 0.
    preprocessing:
      - operation: scale
        value: 0.00001157407
    request:
      param: "143.172"
    accumulations:
      step:
        include_start_step: True
        deaccumulate: True
  "144.172":
    defs:
      STEP_BY: 24
    vmin: 0.
    preprocessing:
      - operation: scale
        value: 0.00001157407
    request:
      param: "144.172"
    accumulations:
      step:
        include_start_step: True
        deaccumulate: True
  "146.172":
    defs:
      STEP_BY: 24
    preprocessing:
      - operation: scale
        value: 0.00001157407
    request:
      param: "146.128"
    accumulations:
      step:
        include_start_step: True
        deaccumulate: True
  "147.172":
    defs:
      STEP_BY: 24
    preprocessing:
      - operation: scale
        value: 0.00001157407
    request:
      param: "147.128"
    accumulations:
      step:
        include_start_step: True
        deaccumulate: True
  "169.172":
    defs:
      STEP_BY: 24
    preprocessing:
      - operation: scale
        value: 0.00001157407
    request:
      param: "169.128"
    accumulations:
      step:
        include_start_step: True
        deaccumulate: True
  "175.172": 
    defs:
      STEP_BY: 24
    preprocessing:
      - operation: scale
        value: 0.00001157407
    request:
      param: "175.128"
    accumulations:
      step:
        include_start_step: True
        deaccumulate: True
  "176.172":
    defs:
      STEP_BY: 24
    preprocessing:
      - operation: scale
        value: 0.00001157407
    request:
      param: "176.128"
    accumulations:
      step:
        include_start_step: True
        deaccumulate: True
  "177.172":
    defs:
      STEP_BY: 24
    preprocessing:
      - operation: scale
        value: 0.00001157407
    request:
      param: "177.128"
    accumulations:
      step:
        include_start_step: True
        deaccumulate: True
  "178.172":
    defs:
      STEP_BY: 24
    preprocessing:
      - operation: scale
        value: 0.00001157407
    request:
      param: "178.128"
    accumulations:
      step:
        include_start_step: True
        deaccumulate: True
  "179.172":
    defs:
      STEP_BY: 24
    preprocessing:
      - operation: scale
        value: 0.00001157407
    request:
      param: "179.128"
    accumulations:
      step:
        include_start_step: True
        deaccumulate: True
  "180.172":
    defs:
      STEP_BY: 24
    preprocessing:
      - operation: scale
        value: 0.00001157407
    request:
      param: "180.128"
    accumulations:
      step:
        include_start_step: True
        deaccumulate: True
  "181.172":
    defs:
      STEP_BY: 24
    preprocessing:
      - operation: scale
        value: 0.00001157407
    request:
      param: "181.128"
    accumulations:
      step:
        include_start_step: True
        deaccumulate: True
  "182.172":
    defs:
      STEP_BY: 24
    preprocessing:
      - operation: scale
        value: 0.00001157407
    request:
      param: "182.128"
    accumulations:
      step:
        include_start_step: True
        deaccumulate: True
  "189.172":
    defs:
      STEP_BY: 24
    vmin: 0.
    vmax: 1.
    preprocessing:
      - operation: scale
        value: 0.00001157407
    request:
      param: "189.128"
    accumulations:
      step:
        include_start_step: True
        deaccumulate: True
  "228.172":
    defs:
      STEP_BY: 24
    vmin: 0.
    preprocessing:
      - operation: scale
        value: 0.00001157407
    request:
      param: "228.128"
    accumulations:
      step:
        include_start_step: True
        deaccumulate: True
  "202.128":
    request:
      param: "122.128"
    metadata:
      indicatorOfParameter: 202
  "201.128":
    request:
      param: "121.128"
    metadata:
      indicatorOfParameter: 201
filter:type:
  em/es:
    entrypoint: pproc-ensms
    metadata: 
      perturbationNumber: 0
      bitsPerValue: 16
    accumulations:
      step:
        type: legacywindow
        coords:
          type: ranges 
          from: "{STEP_START}" 
          to: "{STEP_END}" 
          interval: "{INTERVAL}"
    filter:param:
      "*": {}
      "129.128/130.128": 
        request:
          interpolate:
            <<: *interp_keys
            grid: "{GRID}"
      "200228":
        request:
          param: "228.128"
        accumulations:
          step:
            operation: diff
            coords:
              width: "{WIDTH}"
              by: "{STEP_BY}"
        metadata:
          stepType: diff
          paramId: 200228 
  fcmean:
    filter:stream:
      "*": 
        entrypoint: pproc-accumulate
        accumulations:
          step:
            type: legacywindow
            operation: mean
            grib_keys:
              type: fcmean
            coords:
              type: ranges 
              from: "{STEP_START}" 
              to: "{STEP_END}" 
              interval: 24 
              width: 168
              by: "{STEP_BY}"
      *mstreams:
        entrypoint: pproc-monthly-stats
        accumulations:
          step:
            type: legacywindow
            operation: mean
            grib_keys:
              type: fcmean
            coords: 
              type: monthly
              date: "{date}"
              from: "{STEP_START}" 
              to: "{STEP_END}"
              by: "{STEP_BY}"
    filter:param:
      "*": {}
      40.128/41.128/42.128/170.128/229.140/231.140/232.140/233.140/245.140:
        defs:
          STEP_BY: 24
        request:
          param: "{param}"
      130.128/129.128/138.128/155.128/131.128/132.128/133.128/1.128/2.128/60.128/3.128:
        defs:
          STEP_BY: 12
        request:
          param: "{param}"
      "235117":
        request:
          param: "59.128"
        metadata:
          discipline: 0
          parameterCategory: 7
          parameterNumber: 6
          typeOfFirstFixedSurface: 17
          typeOfStatisticalProcessing: 0
  fcstdev:
    filter:stream:
      "*": 
        entrypoint: pproc-accumulate
        accumulations:
          step:
            type: legacywindow
            operation: standard_deviation
            grib_keys:
              type: fcstdev
            coords:
              type: ranges 
              from: "{STEP_START}" 
              to: "{STEP_END}" 
              interval: 24 
              width: 168
              by: "{STEP_BY}"
      *mstreams:
        entrypoint: pproc-monthly-stats
        accumulations:
          step:
            type: legacywindow
            operation: standard_deviation
            grib_keys:
              type: fcstdev
            coords: 
              type: monthly
              date: "{date}"
              from: "{STEP_START}" 
              to: "{STEP_END}"
              by: "{STEP_BY}"
    filter:param:
      "*": {}
      40.128/41.128/42.128/170.128/229.140/231.140/232.140/233.140/245.140:
        defs:
          STEP_BY: 24
        request:
          param: "{param}"
      130.128/129.128/138.128/155.128/131.128/132.128/133.128/1.128/2.128/60.128/3.128:
        defs:
          STEP_BY: 12
        request:
          param: "{param}"
      "239117":
        request:
          param: "59.128"
        metadata:
          discipline: 0
          parameterCategory: 7
          parameterNumber: 6
          typeOfFirstFixedSurface: 17
          typeOfStatisticalProcessing: 6
  fcmin:
    filter:stream:
      "*": 
        entrypoint: pproc-accumulate
        accumulations:
          step:
            type: legacywindow
            operation: minimum
            grib_keys:
              type: fcmin
            coords:
              type: ranges 
              from: "{STEP_START}" 
              to: "{STEP_END}" 
              interval: 24 
              width: 168
              by: "{STEP_BY}"
      *mstreams:
        entrypoint: pproc-monthly-stats
        accumulations:
          step:
            type: legacywindow
            operation: minimum
            grib_keys:
              type: fcmin
            coords: 
              type: monthly
              date: "{date}"
              from: "{STEP_START}" 
              to: "{STEP_END}"
              by: "{STEP_BY}"
    filter:param:
      "*": {}
      "142.172":
        request:
          param: "142.128"
        from_inputs:
          exclude: True
      "143.172":
        request:
          param: "143.128"
        from_inputs:
          exclude: True
      "144.172":
        request:
          param: "144.128"
        from_inputs:
          exclude: True
      "228.172":
        request:
          param: "228.128"
        from_inputs:
          exclude: True
      40.128/41.128/42.128/170.128/229.140/231.140/232.140/233.140/245.140:
        defs:
          STEP_BY: 24
        request:
          param: "{param}"
      130.128/129.128/138.128/155.128/131.128/132.128/133.128/1.128/2.128/60.128/3.128:
        defs:
          STEP_BY: 12
        request:
          param: "{param}"
      "238117":
        request:
          param: "59.128"
        metadata:
          discipline: 0
          parameterCategory: 7
          parameterNumber: 6
          typeOfFirstFixedSurface: 17
          typeOfStatisticalProcessing: 3
  fcmax:
    filter:stream:
      "*": 
        entrypoint: pproc-accumulate
        accumulations:
          step:
            type: legacywindow
            operation: maximum
            grib_keys:
              type: fcmax
            coords:
              type: ranges 
              from: "{STEP_START}" 
              to: "{STEP_END}" 
              interval: 24 
              width: 168
              by: "{STEP_BY}"
      *mstreams:
        entrypoint: pproc-monthly-stats
        accumulations:
          step:
            type: legacywindow
            operation: maximum
            grib_keys:
              type: fcmax
            coords: 
              type: monthly
              date: "{date}"
              from: "{STEP_START}" 
              to: "{STEP_END}"
              by: "{STEP_BY}"
    filter:param:
      "*": {}
      40.128/41.128/42.128/170.128/229.140/231.140/232.140/233.140/245.140:
        defs:
          STEP_BY: 24
        request:
          param: "{param}"
      130.128/129.128/138.128/155.128/131.128/132.128/133.128/1.128/2.128/60.128/3.128:
        defs:
          STEP_BY: 12
        request:
          param: "{param}"
      "237117":
        request:
          param: "59.128"
        metadata:
          discipline: 0
          parameterCategory: 7
          parameterNumber: 6
          typeOfFirstFixedSurface: 17
          typeOfStatisticalProcessing: 2